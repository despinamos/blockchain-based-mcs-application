<!DOCTYPE html>
<html>

<head>
	<title>
		WTF! - Web3, Token, and Frontend
	</title>
	<!-- <link rel='stylesheet' href='/stylesheets/style.css' /> -->

	<!-- import Web3.js -->
	<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
	<script src="./location_deploy.js"></script>
</head>

<body>
	<h1>
		HomePage
	</h1>

	<!-- placeholders -->
	<div id="provider"></div>
	<div id="connectedAccount"></div>
	<div id="warn" style="color: red"></div>

	<div>
		<button id="requestAccounts">Connect to Metamask</button>
	</div>
	<form id="dataForm">
		<div>
			<fieldset style="font-family: 'Courier New', Courier, monospace; font-size:smaller; font-weight:bold;">
				<legend>Name</legend>
				<input type="text" name="username" id="username" required>
				<button type="submit">Submit</button>
			</fieldset>
		</div>
	</form>

	<script type="module">
		if (window.ethereum) {
			// use the injected Ethereum provider to initialize Web3.js
			const web3 = new Web3(window.ethereum);

			// check if Ethereum provider comes from MetaMask
			if (window.ethereum.isMetaMask) {
				document.getElementById('provider').innerText =
					'Connected to Ethereum with MetaMask.';
			} else {
				document.getElementById('provider').innerText =
					'Non-MetaMask Ethereum provider detected.';
			}

			// click event for "Request MetaMask Accounts" button
			document.getElementById('requestAccounts').addEventListener('click', async () => {
				// request accounts from MetaMask
				await window.ethereum.request({ method: 'eth_requestAccounts' });
				document.getElementById('requestAccounts').remove();

				// get list of accounts
				const accounts = await web3.eth.getAccounts();
				// get the first account and populate placeholder
				document.getElementById(
					'connectedAccount',
				).innerText = `Account: ${accounts[0]}`;
			});

		} else {
			// no Ethereum provider - instruct user to install MetaMask
			document.getElementById('warn').innerHTML =
				"Please <a href='https://metamask.io/download/'>install MetaMask</a>.";
			document.getElementById('requestAccounts').disabled = true;
		}

	</script>

	<!-- <h2>Account: <span class="showAccount"></span></h2>
  <h2>Chain ID: <span class="showChainId"></span></h2> -->
	<!-- <script src="../../express/routes/index.js"></script> -->


	<button onclick="getLocation()">Button</button>


	<!-- <script type="module" src="./interact.mjs"></script> -->
	<script src="./interact.mjs"></script>

</body onload="deploy()">

</html>